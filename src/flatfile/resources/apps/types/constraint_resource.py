# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

from ....core.datetime_utils import serialize_datetime
from ...commons.types.app_id import AppId
from ...commons.types.constraint_id import ConstraintId

try:
    import pydantic.v1 as pydantic  # type: ignore
except ImportError:
    import pydantic  # type: ignore


class ConstraintResource(pydantic.BaseModel):
    """
    import datetime

    from flatfile import ConstraintResource

    ConstraintResource(id="us_cn_YOUR_ID", app_id="us_app_YOUR_ID", validator="UsPhoneValidation", description="Validates that a phone number matches US format", function='function constraint(value, key, { config, record }) {
      const phoneRegex = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
      if (!phoneRegex.test(value)) {
        record.addError(key, "Please enter a valid US phone number");
      }
    }
    ', label="US Phone Number", options={"errorMessage": "Invalid phone number format", "allowEmpty": false}, created_at=datetime.datetime.fromisoformat("2024-01-15 10:00:00+00:00", ), updated_at=datetime.datetime.fromisoformat("2024-01-15 10:00:00+00:00", ), )
    """

    id: ConstraintId
    app_id: AppId = pydantic.Field(alias="appId")
    validator: str
    description: typing.Optional[str] = None
    function: typing.Optional[str] = None
    options: typing.Optional[typing.Any] = None
    label: typing.Optional[str] = None
    created_at: dt.datetime = pydantic.Field(alias="createdAt")
    updated_at: dt.datetime = pydantic.Field(alias="updatedAt")

    def json(self, **kwargs: typing.Any) -> str:
        kwargs_with_defaults: typing.Any = {"by_alias": True, "exclude_unset": True, **kwargs}
        return super().json(**kwargs_with_defaults)

    def dict(self, **kwargs: typing.Any) -> typing.Dict[str, typing.Any]:
        kwargs_with_defaults: typing.Any = {"by_alias": True, "exclude_unset": True, **kwargs}
        return super().dict(**kwargs_with_defaults)

    class Config:
        frozen = True
        smart_union = True
        allow_population_by_field_name = True
        json_encoders = {dt.datetime: serialize_datetime}
